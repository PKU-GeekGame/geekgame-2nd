# 企鹅文档

一拿到这个题都有点惊呆了，虽然知道突破口八成是后台发送了全量数据，前端隐藏部分数据这种老掉牙的问题，但真的是万万没想到企鹅文档真的存在这种问题。

### 以至于开始做题的几分钟有点想歪了
```
会不会PY交易也是这次比赛的一部分？
这个题的意思是不是让我找群主开通权限？
这个题莫非是想让我盗群主的QQ号？
这个题莫非是让我攻击腾讯服务器？
```

### 除去以上YY部分解题过程
1. F12限制网速后发现首先渲染出来了`H`,`T`,`T`,`P`几个字符，因此怀疑突破口并不在后台发送数据的问题。
2. 直接查看页面源码，发现`H`,`T`,`T`,`P`并不在html中，也就不是后台直接预渲染了页面，推翻了第一步的怀疑，稍微放心了。
3. 那就找找数据是咋发过来的吧，但当时没有第二阶段提示，真不知道放大镜按钮可以直接搜索流量，就在几百个请求中一个一个找。
4. 结果还真在某个API中找到了相关字符，但我是从后面的请求往前看的，所以先看到的是网址的后半部分`BzRJEs_next`，这部分看起来是有意义的，就保存了起来。这里感谢出题人在最后加了个`next`降低难度，如果网址用uuid的话这个题可能还要多花一些时间。
5. 继续往前找request，就找到了`http://...`这一串，两串字符串拼起来就是下一步的解题信息网址。
6. 下载`har`文件后又走了点弯路，试图找到har文件的replay工具，结果找了几个基于`node`和`python`的都不能用，就开始尝试其他方法。
7. 自己在腾讯文档仿照提示做了一个用格子画出的"flag"的文档，试图找出来渲染方式。
8. 结果就发现，'f'的第一行占了3个格子，在相关的数据中刚好有连续的3个数字，对比后面几行之后发现数字正好对应着格子的mask。
9. 答案就呼之欲出了，企鹅文档加载表格文件的方式是把可视范围内的所有格子线性编号，每个格子的坐标就是（编号 / 行数 % 列数）。
10. 把数字重新输出后，~~分别将数据经过一种万亿级像素图像敏感器、一种基于化学和电信号的模拟信号传输管道、一种主要基于化学信号和电信号的数据放大器、一种千兆字节基于顶级神经网络的图像识别处理工具（注：视网膜、视神经、膝状体、大脑）处理~~ 用眼瞅就好了。


以下是我输出的部分结果，识别的过程中分别用了摘眼镜、眯眼睛、干瞪眼等方法，还是挺难认的，尤其是部分字母的大小写不好确认，而且有几次提交到错误的题目里了，一直报flag错误，都有点怀疑这不是最终答案。
```
           
  HHH      
 HH HH     
 HH        
HHHH       
 HH        
 HH        
HHHH       
           
 HHH       
  HH       
  HH       
  HH       
  HH       
  HH       
 HHHH      
           
 HHHH      
    HH     
 HHHHH     
HH  HH     
 HHH HH    
           
 HHH HH    
HH  HH     
HH  HH     
 HHHHH     
    HH     
HHHHH 
```

### 后记
企鹅文档作为用户基数如此之大的产品，竟然会有如此低级的问题存在。
我没有验证是所有的隐藏信息的文档都是这样的，还是因为出题人做了特殊处理，才会让这个文档加载时后台不加验证地返回了数据。

可见信息安全问题无处不在！
